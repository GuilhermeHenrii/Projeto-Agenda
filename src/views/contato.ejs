<%- include('includes/head') %>

<%- include('includes/navbar.ejs') %>

<div class="container">
    <div class="row">
        <div class="col-lg-2"></div>

        <div class="col lg-8 my-3 section">
            <h1 class="text-center">Contatos</h1>
            <p class="text-center lead paragraph">Crie ou edite seus contatos</p>

            <%- include('includes/messages') %>

            <!-- Condicional que verifica se, tivermos o id do usuario, o post não executará novamente a rota que redireciona para salvar o contato e sim para outra rota que vai permitir a edição desse contato, sendo assim se alterarmos algo em um contato ja criado, redirecionameros esse post para uma rota que usará o UPDATE no banco de dados -->
            <% if(contato._id) { %>
                <form action="/contato/edit/<%= contato._id %>" method="POST" autocomplete="off" class="edit-form">
            <% } else { %>
                <form action="/contato/register" method="POST" autocomplete="off" class="register-form">
            <% } %>
                <input type="hidden" name="_csrf" value= <%= csrfToken %>>
                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" value="<%= contato.nome %>" class="form-control" name="nome">
                </div>

                <div class="form-group">
                    <label>Sobrenome</label>
                    <input type="text" value="<%= contato.sobrenome %>" class="form-control" name="sobrenome">
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" value="<%= contato.email %>" class="form-control" name="email">
                </div>

                
                <div class="form-group">
                    <label>Telefone</label>
                    <input type="number" value="<%= contato.telefone %>" class="form-control" name="telefone">
                </div>
            
                <button type="submit" class="btn btn-primary">Salvar</button>
            </form>

        </div>

        <div class="col-lg-2"></div>
    </div>
</div>

<%- include('includes/footer') %>

